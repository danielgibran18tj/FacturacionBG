<div class="modal-backdrop-custom" (click)="close.emit()"></div>

<div class="modal-dialog-custom">
  <div class="modal-content">

    <div class="modal-header bg-primary text-white">
      <h5 class="modal-title">Detalles de Factura</h5>
      <button type="button" class="btn-close" (click)="close.emit()"></button>
    </div>

    <div class="modal-body" *ngIf="invoice">

      <h5 class="fw-bold">Información General</h5>
      <p><strong>Factura Nº:</strong> {{ invoice.invoiceNumber }}</p>
      <p><strong>Fecha:</strong> {{ invoice.invoiceDate | date }}</p>
      <p><strong>Cliente:</strong> {{ invoice.customerName }}</p>
      <p><strong>Documento:</strong> {{ invoice.customerDocument }}</p>
      <p><strong>Vendedor:</strong> {{ invoice.sellerName }}</p>

      <hr>

      <h5 class="fw-bold">Detalle de Productos</h5>
      <table class="table table-striped table-bordered">
        <thead class="table-dark">
          <tr>
            <th>Producto</th>
            <th>Código</th>
            <th>Cantidad</th>
            <th>Precio</th>
            <th>Subtotal</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of invoice.details">
            <td>{{ item.productName }}</td>
            <td>{{ item.productCode }}</td>
            <td>{{ item.quantity }}</td>
            <td>{{ item.unitPrice | currency }}</td>
            <td>{{ item.subtotal | currency }}</td>
          </tr>
        </tbody>
      </table>

      <hr>

      <h5 class="fw-bold">Pagos</h5>
      <table class="table table-sm">
        <thead class="table-light">
          <tr>
            <th>Método</th>
            <th>Monto</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let pay of invoice.payments">
            <td>{{ pay.paymentMethodName }}</td>
            <td>{{ pay.amount | currency }}</td>
          </tr>
        </tbody>
      </table>

      <hr>

      <h5 class="fw-bold">Totales</h5>
      <p><strong>Subtotal:</strong> {{ invoice.subtotal | currency }}</p>
      <p><strong>IVA:</strong> {{ invoice.taxIva | currency }}</p>
      <p><strong>Total:</strong> {{ invoice.total | currency }}</p>

      <hr>
      
      <p><strong>Notas:</strong></p>
      <p>{{ invoice.notes }}</p>

    </div>

    <div class="modal-footer">
      <button class="btn btn-secondary" (click)="close.emit()">Cerrar</button>
    </div>

  </div>
</div>
